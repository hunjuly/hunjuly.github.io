# 전남대 유비온 LMS 연동 문서

## 1. Token API

POST /api/v1/coursemose/tokens

userId를 구별하여 token을 생성해준다.
반환되는 token을 방에 접속할때 쿼리스트링으로 붙여준다.
ex)https://belitest.com/GL745z8/thorough-fragrant-square/?token=eyJhbGciOiJIU...

Request Body

```json
{
  "emailId": "test@test.com"
}
```

Response Body

```json
[201 Created]
{
  "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJyZXQiLCJleHAiOjE2OTI4NDE0OTMsImlhdCI6MTY4NTU4Mzg5MywiaXNzIjoicmV0IiwianRpIjoiMzNmOWQ0YTUtMmJkZC00NmY3LThhN2YtMDU0MjUxYjI5ODllIiwibmJmIjoxNjg1NTgzODkyLCJzdWIiOiIxNTAyNDE1MDkwMTQwMzE2NjM1IiwidHlwIjoiYWNjZXNzIn0.TFn5QNSM8-AYF-pwIwkQPuT9I3xUV5m9rJYJ9Nuz7U38sWAuj3JJF0Ov08xK0_uRILJTVMQQm3NY015FQxxxxx"
}
```

## 2. Scene API

GET /api/v1/coursemos/scenes

빌리버가 만든 scene 리스트를 조회한다.

Header
| Key | Value |
| ------ | ------ |
| Hubs-Authorization | eyJhbGciOiJI... |

Parameter
| Name | Example |
| ------ | ------ |
| page (integer, required) | 0 |
| take (integer, required) | 10 |

Response Body

```json
[200 OK]
{
  "count": 5,
  "scenes": [
    {
      "id": "XQVicHz",
      "name": "xrcloud-lms-class-room-3",
      "korName": "강의실 3",
      "thumbnailUrl": "https://belitest-assets.belitest.com/files/309dcade-3e86-4e63-9927-c1802673eaaa.jpg"
    },
    {
      "id": "StHCaQt",
      "name": "xrcloud-lms-seminar",
      "korName": "세미나실",
      "thumbnailUrl": "https://belitest-assets.belitest.com/files/f1ae736b-6f8c-43a4-8f45-d2fc7822114b.jpg"
    },
    {
      "id": "W5NVA5h",
      "name": "xrcloud-lms-class-room-1",
      "korName": "강의실 1",
      "thumbnailUrl": "https://belitest-assets.belitest.com/files/1122f238-2536-472c-a138-5f6894137a67.jpg"
    },
    {
      "id": "TxaCzFX",
      "name": "xrcloud-lms-class-room-2",
      "korName": "강의실 2",
      "thumbnailUrl": "https://belitest-assets.belitest.com/files/0794aeaf-320f-4e3a-930d-fd32c4a42dc6.jpg"
    },
    {
      "id": "jpwBYB5",
      "name": "xrcloud-lms-meeting-room",
      "korName": "회의실",
      "thumbnailUrl": "https://belitest-assets.belitest.com/files/32c3b7af-13a9-4daa-8a73-e795263cf9a5.jpg"
    }
  ]
}
```

## 3. Room API

POST /api/v1/coursemos/room

특정 씬 지정해서 방을 만들어 준다.

Header
| Key | Value |
| ------ | ------ |
| Hubs-Authorization | eyJhbGciOiJI... |

Request Body

```json
{
  "name": "테스트 교실",
  "sceneId": "ABCDe"
}
```

Response Body

```json
[201 Created]
{
  "roomId": "Kw6nP3j",
  "roomUrl": "https://example.com/Kw6nP3j/asdasddd"
}
```

## 4. Avatar API

GET /api/v1/coursemos/avatar

Hub Authorization 토큰으로 인증 후 아바타를 조회한다.

Header
| Key | Value |
| ------ | ------ |
| Hubs-Authorization | eyJhbGciOiJI... |

Response Body

```json
[200 OK]
{
  "data": [
    {
      "displayName": "방문자",
      "avatarUrl": "http://belitest-assets-740efd60.s3.ap-northeast-1.amazonaws.com/cnu/avatar/aaaaa@test.com.glb",
      "thumbnailUrl": "https://belitest-assets-740efd60.s3.ap-northeast-1.amazonaws.com/cnu/thumbnail/aaaaa@test.com.png"
    }
  ]
}
```
